import React, { useState } from 'react';
import { ChevronRight } from 'lucide-react';

export default function CarsastApp() {
  const [page, setPage] = useState('landing'); // 'landing' or 'form'
  const [step, setStep] = useState(1);
  const [formData, setFormData] = useState({
    budget: '',
    existingVehicle: '',
    canadian: '',
    birthDay: '',
    birthMonth: '',
    birthYear: '',
    employment: '',
    company: '',
    income: '',
    incomeLength: '',
    homeStatus: '',
    homePayment: 2500
  });

  const totalSteps = 10;

  const handleStartApplication = () => {
    setPage('form');
    setStep(1);
  };

  const handleRadioChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const handleInputChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const canProceed = () => {
    switch(step) {
      case 1: return formData.budget !== '';
      case 2: return formData.existingVehicle !== '';
      case 3: return formData.canadian !== '';
      case 4: return formData.birthDay && formData.birthMonth && formData.birthYear;
      case 5: return formData.employment !== '';
      case 6: return formData.company !== '';
      case 7: return formData.income !== '';
      case 8: return formData.incomeLength !== '';
      case 9: return formData.homeStatus !== '';
      case 10: return true;
      default: return false;
    }
  };

  const handleNext = () => {
    if (step < totalSteps) setStep(step + 1);
    else handleSubmit();
  };

  const handleSubmit = () => {
    console.log('Form submitted:', formData);
    alert('Application submitted! Check console for details.');
  };

  const renderFormStep = () => {
    switch(step) {
      case 1:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">What is your Monthly Budget?</h2>
            <div className="space-y-3">
              {['$250-$375/month', '$376-$500/month', '$500+/month'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="budget" value={option} onChange={(e) => handleRadioChange('budget', e.target.value)} checked={formData.budget === option} className="w-5 h-5" />
                  <span className="ml-4 text-gray-700">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 2:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">Do you have an Existing Vehicle?</h2>
            <div className="space-y-3">
              {['No', 'Yes, I want to trade', 'Yes, I\'m keeping it'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="vehicle" value={option} onChange={(e) => handleRadioChange('existingVehicle', e.target.value)} checked={formData.existingVehicle === option} className="w-5 h-5" />
                  <span className="ml-4 text-gray-700">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 3:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">Are you a Canadian citizen or permanent resident?</h2>
            <div className="space-y-3">
              {['Yes', 'No'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="canadian" value={option} onChange={(e) => handleRadioChange('canadian', e.target.value)} checked={formData.canadian === option} className="w-5 h-5" />
                  <span className="ml-4 text-gray-700">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 4:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">What is your Date of Birth?</h2>
            <div className="space-y-3">
              <select value={formData.birthDay} onChange={(e) => handleInputChange('birthDay', e.target.value)} className="w-full p-3 border-2 border-gray-200 rounded-lg">
                <option value="">Day</option>
                {Array.from({length: 31}, (_, i) => i + 1).map(d => <option key={d} value={d}>{d}</option>)}
              </select>
              <select value={formData.birthMonth} onChange={(e) => handleInputChange('birthMonth', e.target.value)} className="w-full p-3 border-2 border-gray-200 rounded-lg">
                <option value="">Month</option>
                {['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].map(m => <option key={m} value={m}>{m}</option>)}
              </select>
              <select value={formData.birthYear} onChange={(e) => handleInputChange('birthYear', e.target.value)} className="w-full p-3 border-2 border-gray-200 rounded-lg">
                <option value="">Year</option>
                {Array.from({length: 80}, (_, i) => new Date().getFullYear() - i).map(y => <option key={y} value={y}>{y}</option>)}
              </select>
            </div>
          </div>
        );
      case 5:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">What is your Employment Status?</h2>
            <div className="grid grid-cols-2 gap-3">
              {['Employed', 'Self Employed', 'Retired', 'Disability', 'Other', 'Unemployed'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="employment" value={option} onChange={(e) => handleRadioChange('employment', e.target.value)} checked={formData.employment === option} className="w-5 h-5" />
                  <span className="ml-3 text-gray-700 text-sm">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 6:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">Where are you Working?</h2>
            <input type="text" placeholder="Company Name" value={formData.company} onChange={(e) => handleInputChange('company', e.target.value)} className="w-full p-3 border-2 border-gray-200 rounded-lg" />
          </div>
        );
      case 7:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">What is your current Monthly Gross Income?</h2>
            <div className="grid grid-cols-2 gap-3">
              {['$1800 to $2200', '$2200 to $3000', '$3000 to $4500', 'Over $4500', 'Under $1800'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="income" value={option} onChange={(e) => handleRadioChange('income', e.target.value)} checked={formData.income === option} className="w-5 h-5" />
                  <span className="ml-3 text-gray-700 text-sm">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 8:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">How long have you been earning this income?</h2>
            <div className="grid grid-cols-2 gap-3">
              {['3 - 6 Months', '6 - 12 Months', '12 Months - 2 Years', '2 Years +', 'Less Than 3 Months'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="incomeLength" value={option} onChange={(e) => handleRadioChange('incomeLength', e.target.value)} checked={formData.incomeLength === option} className="w-5 h-5" />
                  <span className="ml-3 text-gray-700 text-sm">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 9:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">Do you Own or Rent your home?</h2>
            <div className="space-y-3">
              {['Own', 'Rent', 'Other'].map(option => (
                <label key={option} className="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300">
                  <input type="radio" name="homeStatus" value={option} onChange={(e) => handleRadioChange('homeStatus', e.target.value)} checked={formData.homeStatus === option} className="w-5 h-5" />
                  <span className="ml-4 text-gray-700">{option}</span>
                </label>
              ))}
            </div>
          </div>
        );
      case 10:
        return (
          <div>
            <h2 className="text-2xl font-bold mb-6">What Are Your Monthly (Rent Or Mortgage) Payments?</h2>
            <div className="mt-8">
              <div className="text-center mb-6">
                <span className="text-3xl font-bold text-gray-800">${formData.homePayment.toLocaleString()}</span>
              </div>
              <input type="range" min="0" max="5000" step="50" value={formData.homePayment} onChange={(e) => handleInputChange('homePayment', parseInt(e.target.value))} className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" />
              <div className="flex justify-between text-sm text-gray-600 mt-2">
                <span>$0</span>
                <span>$5,000</span>
              </div>
            </div>
          </div>
        );
      default: return null;
    }
  };

  if (page === 'landing') {
    return (
      <div className="bg-gray-100">
        <header className="flex justify-between items-center px-20 py-6 bg-gray-100">
          <div>
            <div className="text-2xl font-bold text-blue-500">carsfast</div>
            <div className="text-xs tracking-widest text-gray-500">LENDING ARCH</div>
          </div>
          <button onClick={handleStartApplication} className="bg-blue-500 text-white px-6 py-2 rounded-full font-semibold hover:bg-blue-600">Apply Now</button>
        </header>

        <section className="flex items-center px-20 py-16 bg-gray-100 min-h-screen">
          <div className="flex-1 pr-20">
            <h1 className="text-5xl font-bold mb-6 leading-tight">Get Your Car Financing Approved in a Matter of <span className="text-blue-500">Minutes!</span></h1>
            <p className="text-gray-600 mb-6 leading-relaxed">Get approved today through the Carsfast network of Dealers across Canada. Our auto finance network specializes in assisting people with all types of credit including consumer proposals! Your job is your credit to get car loans in Canada.</p>
            <div className="bg-blue-100 inline-block px-4 py-3 rounded-lg text-gray-800 font-semibold text-sm">No Sign-up or Log-in Required</div>
          </div>

          <div className="flex-1 relative h-96 flex items-center justify-center">
            <div className="w-full h-full bg-contain bg-no-repeat bg-center" style={{backgroundImage: "url('https://res.cloudinary.com/dndik3mpf/image/upload/v1761010206/bnr-car_lrhlil.png')"}}></div>
            
            <div className="absolute right-0 top-1/2 transform -translate-y-1/2 bg-blue-500 text-white p-8 rounded-xl shadow-lg w-80">
              <h3 className="text-lg font-bold mb-6">Start by clicking on your preferred type of vehicle:</h3>
              <div className="grid grid-cols-2 gap-3 mb-6">
                <button onClick={handleStartApplication} className="bg-white text-gray-800 p-4 rounded-lg text-center hover:bg-gray-100">
                  <div className="text-3xl mb-2">🚗</div>
                  <span className="font-semibold text-sm">Car</span>
                </button>
                <button onClick={handleStartApplication} className="bg-white text-gray-800 p-4 rounded-lg text-center hover:bg-gray-100">
                  <div className="text-3xl mb-2">🚙</div>
                  <span className="font-semibold text-sm">Truck</span>
                </button>
                <button onClick={handleStartApplication} className="bg-white text-gray-800 p-4 rounded-lg text-center hover:bg-gray-100">
                  <div className="text-3xl mb-2">🚐</div>
                  <span className="font-semibold text-sm">Van</span>
                </button>
                <button onClick={handleStartApplication} className="bg-white text-gray-800 p-4 rounded-lg text-center hover:bg-gray-100">
                  <div className="text-3xl mb-2">🚙</div>
                  <span className="font-semibold text-sm">SUV</span>
                </button>
              </div>
              <div className="text-sm text-white"><span className="font-bold text-blue-300">15,750</span> car buyers found the perfect car!</div>
            </div>
          </div>
        </section>

        <section className="bg-white px-20 py-16 text-center">
          <div className="text-gray-500 text-sm mb-6">As Featured In</div>
          <img src="https://res.cloudinary.com/dndik3mpf/image/upload/v1761010266/Screenshot_2025-10-20_182954_z96kt6.png" alt="Featured In" className="max-w-3xl mx-auto h-auto" />
        </section>

        <section className="bg-white px-20 py-24 text-center">
          <h2 className="text-5xl font-bold mb-8">Why Choose Us For Your Auto Financing Needs?</h2>
          <p className="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">Many Canadians are shut out of the traditional car lending market. Bad and limited credit histories should not stop ANYONE from getting reliable transportation.</p>
        </section>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-blue-500 to-blue-400">
      <div className="bg-blue-500 text-white p-6 text-center relative overflow-hidden">
        <div className="absolute top-0 left-0 right-0 h-32 bg-blue-500"></div>
        <div className="absolute top-20 left-0 right-0 h-32 bg-white transform -skew-y-2"></div>
        <div className="relative z-10 pt-8">
          <img src="https://res.cloudinary.com/dndik3mpf/image/upload/v1761011044/logo2_bsr5wr.png" alt="Carsfast" className="h-12 mx-auto" />
        </div>
      </div>

      <div className="flex justify-center items-center min-h-[calc(100vh-140px)] px-4 py-8">
        <div className="bg-white rounded-lg p-8 w-full max-w-2xl shadow-lg">
          <div className="mb-8">
            <div className="flex justify-between items-center mb-4">
              <span className="text-sm text-gray-600">Step {step} of {totalSteps}</span>
            </div>
            <div className="w-full bg-gray-200 h-2 rounded-full overflow-hidden">
              <div className="bg-teal-500 h-full rounded-full transition-all duration-300" style={{width: `${(step / totalSteps) * 100}%`}}></div>
            </div>
          </div>

          {renderFormStep()}

          <div className="mt-12 pt-8 border-t border-gray-200">
            <div className="flex items-center justify-between mb-6 text-sm">
              <div className="flex items-center gap-2">
                <span className="text-green-600">🔒</span>
                <span className="text-gray-600">Safe, Secure, & Confidential</span>
              </div>
              <div className="text-gray-600">
                <span className="text-teal-500">✓</span> <span>15,750 car buyers found the perfect car!</span>
              </div>
            </div>

            <img src="https://res.cloudinary.com/dndik3mpf/image/upload/v1761011051/Screenshot_2025-10-20_184340_ff5j30.png" alt="Security badges" className="h-12 mb-6" />

            <button onClick={handleNext} disabled={!canProceed()} className={`w-full py-3 rounded-lg font-semibold text-white flex items-center justify-center gap-2 transition-all ${canProceed() ? 'bg-blue-500 hover:bg-blue-600' : 'bg-gray-300 cursor-not-allowed'}`}>
              Continue
              <ChevronRight size={20} />
            </button>
          </div>

          <div className="text-center text-xs text-gray-500 mt-6 space-y-2">
            <p className="text-gray-600">Copyright © 2025 Copyright notice: this website and its content are copyrighted by Consumer Genius Inc. and all rights therein are reserved.</p>
            <div className="flex justify-center gap-3 flex-wrap">
              <a href="#" className="text-blue-600 hover:underline">PARTNER WITH US</a>
              <span>|</span>
              <a href="#" className="text-blue-600 hover:underline">NEWS</a>
              <span>|</span>
              <a href="#" className="text-blue-600 hover:underline">PRIVACY POLICY</a>
              <span>|</span>
              <a href="#" className="text-blue-600 hover:underline">TERMS OF USE</a>
              <span>|</span>
              <a href="#" className="text-blue-600 hover:underline">SUBJECT RIGHTS REQUESTS</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
