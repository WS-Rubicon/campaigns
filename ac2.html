<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>State Benefits Portal</title>
    <script type="text/javascript" src="//hpkpn.ttrk.io/track.js"></script>
    <style>
        body { font-family: "Source Sans Pro", sans-serif; background-color: #f4f7f9; color: #212529; margin:0; }
        .container { max-width: 980px; margin: 0 auto; padding: 0 20px; }
        .header { background-color: #f1f1f1; border-bottom: 2px solid #003366; padding: 20px 0; }
        .header-main { display: flex; align-items: center; gap: 20px; }
        .seal { font-size: 40px; }
        .header-title h1 { margin: 0; font-size: 24px; color: #003366; }
        .header-title p { margin: 0; font-size: 16px; color: #555; }
        .alert-bar { background-color: #fdb81e; color: #112e51; text-align: center; padding: 12px; font-weight: 600; }
        .content { padding: 40px 0; }
        .content h2 { text-align: center; font-size: 28px; margin-bottom: 20px; }
        .info-box { background: #fff; border: 1px solid #ddd; border-radius: 5px; padding: 25px; margin-top: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .info-box p { font-size: 18px; text-align: center; }
        .enrollment-counter { text-align: center; margin-top: 25px; font-size: 16px; color: #2e8540; font-weight: 600; }
        .cta-box { background-color: #e1f3f8; border-top: 3px solid #02bfe7; text-align: center; padding: 30px; margin-top: 30px; }
        .cta-button { background-color: #003366; color: white; padding: 15px 40px; text-decoration: none; font-size: 18px; font-weight: 700; border-radius: 4px; }
        .timer-notice { margin-top: 15px; color: #cd2026; font-weight: 600; }
        .footer { text-align: center; padding: 20px; font-size: 12px; color: #6c757d; }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-main">
                <div class="seal">üèõÔ∏è</div>
                <div class="header-title">
                    <h1>STATE OF <span id="geo-state-upper">YOUR STATE</span></h1>
                    <p>Department of Health & Human Services - Benefits Division</p>
                </div>
            </div>
        </div>
    </header>
    <div class="alert-bar">Official Directive: 2025 Grocery Assistance Program for <span id="geo-city">Your City</span></div>
    <div class="container">
        <div class="content">
            <h2>Notice to Residents of <span id="geo-city-2">Your City</span></h2>
            <div class="info-box">
                <p>Based on a new state-level directive, you are pre-qualified for a grocery assistance benefit of <strong>$500 per month</strong>.</p>
                <div class="enrollment-counter">‚úîÔ∏è <span id="enroll-count">127</span> residents in your area have enrolled today.</div>
            </div>
            <div class="cta-box">
                <h3>Your Pre-Qualified Status is Confirmed.</h3>
                <p style="margin-bottom: 25px; color: #333;">Complete your enrollment to lock in your $6,000 annual benefit.</p>
                <a href="https://hpkpn.ttrk.io/click" class="cta-button">CONFIRM ENROLLMENT</a>
                <div class="timer-notice">This opportunity for your area expires in: <span id="timer">23:59:59</span></div>
            </div>
        </div>
    </div>
    <footer class="footer">Public Notice ID: <span id="geo-state-abbr">NV</span>-DHHS-2025-G08</footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- MAIN PAGE LOGIC ---
            async function updateLocation() {
                // Select all the elements that need updating
                const stateUpperEl = document.getElementById('geo-state-upper');
                const stateAbbrEl = document.getElementById('geo-state-abbr');
                const cityEl = document.getElementById('geo-city');
                const city2El = document.getElementById('geo-city-2');

                try {
                    const response = await fetch('https://geo.ipify.org/api/v2/country,city?apiKey=at_JKtyyWskmuI07I6RieQ3a6EBhlt5T');
                    if (!response.ok) throw new Error('API request failed');
                    
                    const data = await response.json();
                    const state = data.location.region || 'Your State';
                    const city = data.location.city || 'Your City';
                    const stateAbbr = data.location.geonameId ? (data.location.region.substring(0, 2).toUpperCase()) : 'US'; // Simple abbreviation

                    // Update the text content of the elements
                    if(stateUpperEl) stateUpperEl.textContent = state.toUpperCase();
                    if(stateAbbrEl) stateAbbrEl.textContent = stateAbbr;
                    if(cityEl) cityEl.textContent = city;
                    if(city2El) city2El.textContent = city;

                } catch (error) {
                    console.error('Error fetching location:', error);
                    // Fallback text if API fails
                    if(stateUpperEl) stateUpperEl.textContent = 'YOUR STATE';
                    if(stateAbbrEl) stateAbbrEl.textContent = 'US';
                    if(cityEl) cityEl.textContent = 'Your City';
                    if(city2El) city2El.textContent = 'Your City';
                }
            }

            function startTimer() {
                let hours = 23, minutes = 59, seconds = 59;
                const timerElement = document.getElementById('timer');
                if (!timerElement) return;

                setInterval(() => {
                    if (seconds > 0) seconds--;
                    else if (minutes > 0) { minutes--; seconds = 59; } 
                    else if (hours > 0) { hours--; minutes = 59; seconds = 59; }
                    timerElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
            
            function startEnrollmentCounter() {
                let count = Math.floor(Math.random() * (150 - 50 + 1)) + 50; // Start with a random number between 50-150
                const countElement = document.getElementById('enroll-count');
                if (!countElement) return;

                countElement.textContent = count;
                setInterval(() => {
                    count += Math.floor(Math.random() * 2) + 1; // Increase by 1 or 2
                    countElement.textContent = count;
                }, 8000 + Math.random() * 4000); // Increases count every 8-12 seconds
            }

            // Run all functions
            updateLocation();
            startTimer();
            startEnrollmentCounter();
        });
    </script>
</body>
</html>
